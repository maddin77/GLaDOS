<!DOCTYPE html>
<html>
    <head>
        <title>James â€¢ User</title>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <style type="text/css">{%css%}</style>
        <script type="text/javascript">{%jquery%}</script>
        <script type="text/javascript">{%bootstrapjs%}</script>
        <script type="text/javascript">{%dataTables%}</script>
        <script type="text/javascript">{%dtbootstrap%}</script>
        <link href="data:image/x-icon;base64,AAABAAEAEBAQAAAAAAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQEBAAICAwACAwQAAgMDAAMDAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAQAAAABQAAAAAAUAADAEAgBQAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA4YcAAMADAADYGwAA/D8AAP//AAD//wAA//8AAP//AAD//wAA" rel="shortcut icon" />
    </head>
    <body>
        <div class="container">
            <div class="row main">
                <div class="navbar navbar-static-top">
                    <div class="navbar-inner">
                        <ul class="nav">
                            <li><a href="/quiz">Quiz Score</a></li>
                            <li><a href="/karma">Karma</a></li>
                            <li class="active"><a href="/user">User</a></li>
                            <li><a href="/channel">Channel</a></li>
                        </ul>
                        <ul class="nav pull-right">
                            <li><a href="" id="timer">Data cached for <strong>{%CACHEDFOR%}</strong> sec. Next update in <b>{%CACHEDFOR%}.0</b> sec.</a></li>
                        </ul>
                        
                    </div>
                </div>
                <div class="content">
                    <table id="userlist" class="table table-striped table-bordered table-hover table-condensed"></table>
                </div>
            </div>
        </div>
        <script type="text/javascript">
        $(function() {
            var user = {%USER%}, data = "<thead><th>Nick</th><th>Username</th><th>Realname</th><th>Host</th><th>Account</th></thead><tbody>";
            user.sort(function(a,b) {
                if(a.nick<b.nick) return -1;
                if(a.nick>b.nick) return 1;
                return 0;
            });
            for(var i=0; i<user.length; i++) {
                if(user[i].account === null) user[i].account = "";
                data += "<tr><td><a href='/user/" + user[i].nick + "'>" + user[i].nick + "</a></td><td>" + user[i].userName + "</td><td>" + user[i].realName + "</td><td>" + user[i].host + "</td><td>" + user[i].account + "</td></tr>";
            }
            data += "</tbody>";
            $('#userlist').html(data);

            $('#userlist').dataTable( {
                "sDom": "<'row-fluid'<'span6'T><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
                "sPaginationType": "bootstrap",
                "iDisplayLength": -1
            });
        });
        </script>
        <script type="text/javascript">
        $(function() {
            var time = new Date("{%TIME%}").getTime();
            var cached = {%CACHEDFOR%};
            setInterval(function() {
                var diff = ((cached*1000) - (new Date().getTime() - time)) / 1000;
                $('#timer b').html(diff.toFixed(1));
                $('#timer strong').html(cached);
                if(diff <= 0) {
                    time = new Date();
                }
            }, 100);
        });
        </script>
    </body>
</html>