<!DOCTYPE html>
<html>
    <head>
        <title>James â€¢ Channel</title>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <style type="text/css">{%css%}</style>
        <script type="text/javascript">{%jquery%}</script>
        <script type="text/javascript">{%bootstrapjs%}</script>
        <script type="text/javascript">{%dataTables%}</script>
        <script type="text/javascript">{%dtbootstrap%}</script>
        <link href="data:image/x-icon;base64,AAABAAEAEBAQAAAAAAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQEBAAICAwACAwQAAgMDAAMDAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAQAAAABQAAAAAAUAADAEAgBQAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA4YcAAMADAADYGwAA/D8AAP//AAD//wAA//8AAP//AAD//wAA" rel="shortcut icon" />
    </head>
    <body>
        <div class="container">
            <div class="row main">
                <div class="navbar navbar-static-top">
                    <div class="navbar-inner">
                        <ul class="nav">
                            <li><a href="/quiz">Quiz Score</a></li>
                            <li><a href="/karma">Karma</a></li>
                            <li><a href="/user">User</a></li>
                            <li class="active"><a href="/channel">Channel</a></li>
                        </ul>
                        <ul class="nav pull-right">
                            <li><a href="" id="timer">Data cached for <strong>{%CACHEDFOR%}</strong> sec. Next update in <b>{%CACHEDFOR%}.0</b> sec.</a></li>
                        </ul>
                        
                    </div>
                </div>
                <div class="content">
                    <table id="channellist" class="table table-striped table-bordered table-hover table-condensed"></table>
                </div>
            </div>
        </div>
        <script type="text/javascript">
        $(function() {
            var channel = {%CHANNEL%}, data = "<thead><th>Name</th><th>User</th><th>Topic</th></thead><tbody>";
            channel.sort(function(a,b) {
                if(a.name<b.name) return -1;
                if(a.name>b.name) return 1;
                return 0;
            });
            for(var i=0; i<channel.length; i++) {
                data += "<tr><td style='white-space: nowrap;'><a href='/channel/" + channel[i].name.slice(1) + "'>" + channel[i].name + "</a></td><td width='50' style='text-align:center;'>" + channel[i].userCount + "</td><td>" + channel[i].topic + "</td></tr>";
            }
            data += "</tbody>";
            $('#channellist').html(data);

            $('#channellist').dataTable( {
                "sDom": "<'row-fluid'<'span6'T><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
                "sPaginationType": "bootstrap",
                "iDisplayLength": -1
            });
        });
        </script>
        <script type="text/javascript">
        $(function() {
            var time = new Date("{%TIME%}").getTime();
            var cached = {%CACHEDFOR%};
            setInterval(function() {
                var diff = ((cached*1000) - (new Date().getTime() - time)) / 1000;
                $('#timer b').html(diff.toFixed(1));
                $('#timer strong').html(cached);
                if(diff <= 0) {
                    time = new Date();
                }
            }, 100);
        });
        </script>
    </body>
</html>